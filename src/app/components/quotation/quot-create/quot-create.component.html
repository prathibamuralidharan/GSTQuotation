<section class="ml-64 bg-gray-100">
  <section class="rounded-sm bg-gray-100 pb-4 shadow-md">
    <div
      class="container inline-flex items-center justify-between p-2 font-normal text-black"
    >
      <div>
        <h1 class="inline-flex items-center text-gray-500">
          <svg
            class="size-4 text-gray-500 dark:text-gray-800"
            aria-hidden="true"
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            fill="none"
            viewBox="0 0 24 24"
          >
            <path
              stroke="currentColor"
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="m15 19-7-7 7-7"
            />
          </svg>
          Create Quotation
        </h1>
      </div>
      <div class="button-group">
        <button
          type="button"
          class="inline-flex items-center rounded-lg px-5 py-2.5 text-center text-sm font-medium text-gray-500 focus:outline-none focus:ring-4 focus:ring-[#3b5998]/50 dark:focus:ring-[#3b5998]/55"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            fill="currentColor"
            class="size-4"
          >
            <path
              fill-rule="evenodd"
              d="M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25ZM12.75 9a.75.75 0 0 0-1.5 0v2.25H9a.75.75 0 0 0 0 1.5h2.25V15a.75.75 0 0 0 1.5 0v-2.25H15a.75.75 0 0 0 0-1.5h-2.25V9Z"
              clip-rule="evenodd"
            />
          </svg>
          Custom Headers
          <svg
            class="size-4 text-gray-800 dark:text-gray-800"
            aria-hidden="true"
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            fill="none"
            viewBox="0 0 24 24"
          >
            <path
              stroke="currentColor"
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M12 14v3m-3-6V7a3 3 0 1 1 6 0v4m-8 0h10a1 1 0 0 1 1 1v7a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1v-7a1 1 0 0 1 1-1Z"
            />
          </svg>
        </button>
        <button
          type="button"
          class="inline-flex items-center rounded-lg py-2.5 text-center text-sm font-medium text-gray-500 focus:outline-none focus:ring-4 focus:ring-[#3b5998]/50 dark:focus:ring-[#3b5998]/55"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            fill="currentColor"
            class="ml- h-4 w-4"
          >
            <path
              fill-rule="evenodd"
              d="M11.828 2.25c-.916 0-1.699.663-1.85 1.567l-.091.549a.798.798 0 0 1-.517.608 7.45 7.45 0 0 0-.478.198.798.798 0 0 1-.796-.064l-.453-.324a1.875 1.875 0 0 0-2.416.2l-.243.243a1.875 1.875 0 0 0-.2 2.416l.324.453a.798.798 0 0 1 .064.796 7.448 7.448 0 0 0-.198.478.798.798 0 0 1-.608.517l-.55.092a1.875 1.875 0 0 0-1.566 1.849v.344c0 .916.663 1.699 1.567 1.85l.549.091c.281.047.508.25.608.517.06.162.127.321.198.478a.798.798 0 0 1-.064.796l-.324.453a1.875 1.875 0 0 0 .2 2.416l.243.243c.648.648 1.67.733 2.416.2l.453-.324a.798.798 0 0 1 .796-.064c.157.071.316.137.478.198.267.1.47.327.517.608l.092.55c.15.903.932 1.566 1.849 1.566h.344c.916 0 1.699-.663 1.85-1.567l.091-.549a.798.798 0 0 1 .517-.608 7.52 7.52 0 0 0 .478-.198.798.798 0 0 1 .796.064l.453.324a1.875 1.875 0 0 0 2.416-.2l.243-.243c.648-.648.733-1.67.2-2.416l-.324-.453a.798.798 0 0 1-.064-.796c.071-.157.137-.316.198-.478.1-.267.327-.47.608-.517l.55-.091a1.875 1.875 0 0 0 1.566-1.85v-.344c0-.916-.663-1.699-1.567-1.85l-.549-.091a.798.798 0 0 1-.608-.517 7.507 7.507 0 0 0-.198-.478.798.798 0 0 1 .064-.796l.324-.453a1.875 1.875 0 0 0-.2-2.416l-.243-.243a1.875 1.875 0 0 0-2.416-.2l-.453.324a.798.798 0 0 1-.796.064 7.462 7.462 0 0 0-.478-.198.798.798 0 0 1-.517-.608l-.091-.55a1.875 1.875 0 0 0-1.85-1.566h-.344ZM12 15.75a3.75 3.75 0 1 0 0-7.5 3.75 3.75 0 0 0 0 7.5Z"
              clip-rule="evenodd"
            />
          </svg>
          Settings
        </button>
      </div>
    </div>
    <div class="m-2 -mt-2 rounded-md bg-white p-4">
      <div class="m-3">
        <h1
          class="inline-flex items-center pt-1 font-serif text-sm text-gray-600"
        >
          Quotation<svg
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            stroke-width="1.5"
            stroke="currentColor"
            class="mt-1 size-3.5"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M5.25 8.25h15m-16.5 7.5h15m-1.8-13.5-3.9 19.5m-2.1-19.5-3.9 19.5"
            />
          </svg>
        </h1>
      </div>
      <div class="row-span-2 ml-4 flex rounded-md">
        <select class="w-32 rounded-l-md border border-gray-400 p-0.5" id="">
          <option value="">EST2024-25</option>
        </select>
        <div class="border-1">
          <input
            #autoid
            type="number"
            (change)="autoGen()"
            value="{{ _id }}"
            class="w-14 rounded-r-md border border-gray-400 p-0.5 text-gray-900"
          />
        </div>
      </div>
      <div
        class="ml-3 mt-3 inline-flex justify-between rounded-md p-2 font-serif text-sm shadow-sm"
      >
        <select name="" id="">
          <option>Quatation</option>
          <option value="">Estimation</option>
        </select>
      </div>
      <div class="rounded-md border border-blue-300 bg-blue-100">
        <div class="relative overflow-x-auto">
          <table
            class="w-full text-left text-sm text-gray-500 rtl:text-right dark:text-gray-400"
          >
            <thead class="text-xs uppercase text-gray-700 dark:text-gray-400">
              <tr>
                <th scope="col" class="px-6 py-3">
                  <div>
                    <div class="inline-flex items-center">
                      <button
                        type="button"
                        class="inline-flex items-center rounded-lg px-1 py-1 text-center text-xs font-medium text-black focus:outline-none focus:ring-4 focus:ring-[#3b5998]/50 dark:focus:ring-[#3b5998]/55"
                      >
                        Select Customer
                        <svg
                          class="size-4 text-gray-800 dark:text-gray-400"
                          aria-hidden="true"
                          xmlns="http://www.w3.org/2000/svg"
                          width="24"
                          height="24"
                          fill="currentColor"
                          viewBox="0 0 24 24"
                        >
                          <path
                            fill-rule="evenodd"
                            d="M2 12C2 6.477 6.477 2 12 2s10 4.477 10 10-4.477 10-10 10S2 17.523 2 12Zm9.008-3.018a1.502 1.502 0 0 1 2.522 1.159v.024a1.44 1.44 0 0 1-1.493 1.418 1 1 0 0 0-1.037.999V14a1 1 0 1 0 2 0v-.539a3.44 3.44 0 0 0 2.529-3.256 3.502 3.502 0 0 0-7-.255 1 1 0 0 0 2 .076c.014-.398.187-.774.48-1.044Zm.982 7.026a1 1 0 1 0 0 2H12a1 1 0 1 0 0-2h-.01Z"
                            clip-rule="evenodd"
                          />
                        </svg>
                      </button>
                      <button
                        routerLink="/home/addcustomer"
                        class="inline-flex items-center text-xs font-normal text-gray-600 hover:underline dark:text-gray-600"
                      >
                        <svg
                          xmlns="http://www.w3.org/2000/svg"
                          viewBox="0 0 24 24"
                          fill="currentColor"
                          class="ml-3 size-3 text-gray-500"
                        >
                          <path
                            fill-rule="evenodd"
                            d="M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25ZM12.75 9a.75.75 0 0 0-1.5 0v2.25H9a.75.75 0 0 0 0 1.5h2.25V15a.75.75 0 0 0 1.5 0v-2.25H15a.75.75 0 0 0 0-1.5h-2.25V9Z"
                            clip-rule="evenodd"
                          />
                        </svg>
                        <small> Add New Customer</small>
                      </button>
                    </div>
                    <div>
                      <select
                        #cusId
                        (click)="selectCustomer(cusId.value)"
                        class="select-option.customer common-style w-full p-2"
                      >
                        <option value="null" disabled selected>
                          Customer Name
                        </option>
                        <option
                          *ngFor="let customer of _customerName"
                          value="{{ customer.cusId }}"
                        >
                          {{ customer.cusName }}
                        </option>
                        <!-- Assuming you will populate the options dynamically -->
                      </select>
                      <div *ngIf="!cusId.value">
                        <div class="mt-1 text-xs text-red-500">
                          Customer Name is required.
                        </div>
                      </div>
                    </div>
                  </div>
                </th>
                <th scope="col" class="px-6 py-3">
                  <div class="">
                    <div class="border-orange-300 text-xs font-normal">
                      <a class="inline-flex items-center text-sm font-medium"
                        ><small>Quotation Date</small>
                        <svg
                          class="size-4 text-gray-800 dark:text-gray-400"
                          aria-hidden="true"
                          xmlns="http://www.w3.org/2000/svg"
                          width="24"
                          height="24"
                          fill="currentColor"
                          viewBox="0 0 24 24"
                        >
                          <path
                            fill-rule="evenodd"
                            d="M2 12C2 6.477 6.477 2 12 2s10 4.477 10 10-4.477 10-10 10S2 17.523 2 12Zm9.008-3.018a1.502 1.502 0 0 1 2.522 1.159v.024a1.44 1.44 0 0 1-1.493 1.418 1 1 0 0 0-1.037.999V14a1 1 0 1 0 2 0v-.539a3.44 3.44 0 0 0 2.529-3.256 3.502 3.502 0 0 0-7-.255 1 1 0 0 0 2 .076c.014-.398.187-.774.48-1.044Zm.982 7.026a1 1 0 1 0 0 2H12a1 1 0 1 0 0-2h-.01Z"
                            clip-rule="evenodd"
                          />
                        </svg>
                      </a>
                    </div>
                    <input
                      #quoDate
                      (change)="quotationDate(quoDate.value)"
                      type="date"
                      class="mt-2 w-full rounded-md border-orange-300 p-2 text-sm text-gray-400 dark:bg-gray-100"
                      required
                    />
                  </div>
                </th>
                <th scope="col" class="px-6 py-3">
                  <div class="">
                    <div class="text-xs font-normal">
                      <a class="inline-flex items-center text-sm font-medium"
                        ><small>Reference</small>
                        <svg
                          class="size-4 text-gray-800 dark:text-gray-400"
                          aria-hidden="true"
                          xmlns="http://www.w3.org/2000/svg"
                          width="24"
                          height="24"
                          fill="currentColor"
                          viewBox="0 0 24 24"
                        >
                          <path
                            fill-rule="evenodd"
                            d="M2 12C2 6.477 6.477 2 12 2s10 4.477 10 10-4.477 10-10 10S2 17.523 2 12Zm9.008-3.018a1.502 1.502 0 0 1 2.522 1.159v.024a1.44 1.44 0 0 1-1.493 1.418 1 1 0 0 0-1.037.999V14a1 1 0 1 0 2 0v-.539a3.44 3.44 0 0 0 2.529-3.256 3.502 3.502 0 0 0-7-.255 1 1 0 0 0 2 .076c.014-.398.187-.774.48-1.044Zm.982 7.026a1 1 0 1 0 0 2H12a1 1 0 1 0 0-2h-.01Z"
                            clip-rule="evenodd"
                          />
                        </svg>
                      </a>
                    </div>
                    <textarea
                      #reference
                      (change)="quoReference(reference.value)"
                      type="text"
                      name="brand"
                      id="brand"
                      class="mt-2 block w-full rounded-lg border border-blue-300 bg-gray-50 text-sm text-gray-900 dark:border-gray-200 dark:bg-gray-100 dark:text-gray-600 dark:placeholder-gray-400"
                      placeholder=" PO Number, Mail, Any text"
                      required=""
                    ></textarea>
                  </div>
                </th>
              </tr>
            </thead>
          </table>
        </div>
        <div *ngIf="selectedCustomer">
          <div class="mt-2">
            <textarea
              type="text"
              id="customer_address"
              class="input-text1 ml-4 w-1/2 rounded-lg border-blue-600 p-2"
              placeholder="Customer Address"
              [(ngModel)]="selectedCustomerAddress"
            ></textarea>
          </div>
        </div>
      </div>
      <div class="mt-4 rounded-md border border-blue-300 bg-blue-100">
        <div class="relative overflow-x-auto">
          <table
            class="w-full text-left text-sm text-gray-500 rtl:text-right dark:text-gray-400"
          >
            <thead class="text-xs uppercase text-gray-700 dark:text-gray-400">
              <tr>
                <th scope="col" class="px-6 py-3">
                  <form action="" [formGroup]="addQuoteForm">
                    <div class="flex">
                      <div class="">
                        <div class="inline-flex items-center">
                          <button
                            type="button"
                            class="inline-flex items-center rounded-lg px-1 py-1 text-center text-xs font-medium text-black focus:outline-none focus:ring-4 focus:ring-[#3b5998]/50 dark:focus:ring-[#3b5998]/55"
                          >
                            Select Product
                            <svg
                              class="size-4 text-gray-800 dark:text-gray-400"
                              aria-hidden="true"
                              xmlns="http://www.w3.org/2000/svg"
                              width="24"
                              height="24"
                              fill="currentColor"
                              viewBox="0 0 24 24"
                            >
                              <path
                                fill-rule="evenodd"
                                d="M2 12C2 6.477 6.477 2 12 2s10 4.477 10 10-4.477 10-10 10S2 17.523 2 12Zm9.008-3.018a1.502 1.502 0 0 1 2.522 1.159v.024a1.44 1.44 0 0 1-1.493 1.418 1 1 0 0 0-1.037.999V14a1 1 0 1 0 2 0v-.539a3.44 3.44 0 0 0 2.529-3.256 3.502 3.502 0 0 0-7-.255 1 1 0 0 0 2 .076c.014-.398.187-.774.48-1.044Zm.982 7.026a1 1 0 1 0 0 2H12a1 1 0 1 0 0-2h-.01Z"
                                clip-rule="evenodd"
                              />
                            </svg>
                          </button>
                          <button
                            routerLink="/home/cproduct"
                            class="inline-flex items-center text-xs font-normal text-gray-600 hover:underline dark:text-gray-600"
                          >
                            <svg
                              xmlns="http://www.w3.org/2000/svg"
                              viewBox="0 0 24 24"
                              fill="currentColor"
                              class="ml-3 size-3 text-gray-500"
                            >
                              <path
                                fill-rule="evenodd"
                                d="M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25ZM12.75 9a.75.75 0 0 0-1.5 0v2.25H9a.75.75 0 0 0 0 1.5h2.25V15a.75.75 0 0 0 1.5 0v-2.25H15a.75.75 0 0 0 0-1.5h-2.25V9Z"
                                clip-rule="evenodd"
                              />
                            </svg>
                            <small>Add New Product</small>
                          </button>
                        </div>
                        <div class="w-full">
                          <div class="mt-2 flex">
                            <div class="flex">
                              <select
                                formControlName="prdGroup"
                                #category
                                class="select-option common-style p-2"
                                (change)="onProductGroupChange(category.value)"
                              >
                                <option [value]="null" disabled selected>
                                  Group
                                </option>
                                <option
                                  *ngFor="let group of _productGroups"
                                  value="{{ group.prdGrpId }}"
                                >
                                  {{ group.prdGrop }}
                                </option>
                              </select>
                              <select
                                formControlName="prdCategory"
                                #brand
                                class="select-option common-style p-2"
                                (change)="onBrandCategoryChange(brand.value)"
                              >
                                <option [value]="null" disabled selected>
                                  Category
                                </option>
                                <option
                                  *ngFor="let category of _categories"
                                  value="{{ category.prdCateId }}"
                                >
                                  {{ category.prdCategory }}
                                </option>
                              </select>
                              <select
                                formControlName="prdBrand"
                                #brandId
                                (change)="getModelList(brandId.value)"
                                class="select-option common-style p-2"
                              >
                                <option [value]="null" disabled selected>
                                  Brand
                                </option>
                                <option
                                  *ngFor="let brand of _brand"
                                  value="{{ brand.prdBrandId }}"
                                >
                                  {{ brand.prdBrand }}
                                </option>
                              </select>
                              <select
                                formControlName="prdModel"
                                #pID
                                (change)="getDescriptionList(pID.value)"
                                class="select-option common-style p-2"
                              >
                                <option [value]="null" disabled selected>
                                  Model
                                </option>
                                <option
                                  *ngFor="let item of _modelList"
                                  value="{{ item.prdModel }}"
                                >
                                  {{ item.prdModel }}
                                </option>
                              </select>
                              <select
                                formControlName="prdModel"
                                #dID
                                (change)="getProduct(dID.value)"
                                class="select-option common-style description-select p-2"
                              >
                                <option [value]="null" disabled selected>
                                  Description
                                </option>
                                <option
                                  *ngFor="let item of _description"
                                  value="{{ item.prdId }}"
                                >
                                  {{ item.prdDescription }}
                                </option>
                              </select>
                            </div>
                          </div>
                        </div>
                      </div>

                      <div class="ml-7">
                        <div class="inline-flex items-center gap-2">
                          <div class="text-xs font-normal">
                            <a
                              class="mt-2 inline-flex items-center text-sm font-normal"
                            >
                              <small>Unit Price</small>
                            </a>
                            <div class="flex">
                              <input
                                #unitPrice
                                (change)="unitvalue(unitPrice.value)"
                                type="number"
                                formControlName="prdUnitPrice"
                                aria-describedby="helper-text-explanation"
                                class="block w-32 rounded-lg border border-gray-300 bg-gray-50 p-2 text-sm text-gray-900 dark:bg-gray-100 dark:text-gray-800 dark:placeholder-gray-400"
                                placeholder="20000"
                                required
                              />
                            </div>
                          </div>
                          <div class="text-xs font-normal">
                            <a
                              class="mt-2 inline-flex items-center text-sm font-normal"
                            >
                              <small>Quantity</small>
                            </a>
                            <div class="flex">
                              <input
                                #quantity
                                (change)="quantitynumber(quantity.value)"
                                formControlName="prdQuantity"
                                type="number"
                                aria-describedby="helper-text-explanation"
                                class="block w-20 rounded-lg border border-gray-300 bg-gray-50 p-2 text-sm text-gray-900 dark:bg-gray-100 dark:text-gray-800 dark:placeholder-gray-400"
                                placeholder="1"
                                required
                              />
                            </div>
                          </div>
                          <div class="text-xs font-normal">
                            <a
                              class="mt-2 inline-flex items-center text-sm font-normal"
                            >
                              <small>GST %</small>
                            </a>
                            <div class="flex">
                              <input
                                readonly
                                #gst
                                (change)="gstvalue(gst.value)"
                                type="number"
                                formControlName="prdGstPercent"
                                aria-describedby="helper-text-explanation"
                                class="mt-0 block w-20 rounded-lg border border-gray-300 bg-gray-50 p-2 text-sm text-gray-900 dark:bg-gray-100 dark:text-gray-800 dark:placeholder-gray-400"
                                placeholder="0%"
                                required
                              />

                              <button
                                type="button"
                                [disabled]="addQuoteForm.invalid"
                                (click)="addToBill(addQuoteForm.value)"
                                class="ml-4 mt-2 inline-flex items-center rounded-lg bg-blue-700 px-3 py-1.5 text-sm font-medium text-white hover:bg-blue-800 focus:outline-none focus:ring-4 focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700"
                              >
                                <svg
                                  xmlns="http://www.w3.org/2000/svg"
                                  fill="none"
                                  viewBox="0 0 24 24"
                                  stroke-width="1.5"
                                  stroke="currentColor"
                                  class="size-4"
                                >
                                  <path
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                    d="M12 4.5v15m7.5-7.5h-15"
                                  />
                                </svg>
                                Add to Bill
                              </button>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </form>
                </th>
              </tr>
            </thead>
          </table>
        </div>
      </div>

      <div class="mt-4 rounded-lg border">
        <div>
          <section class="rounded-lg dark:bg-white">
            <div class="mx-auto">
              <div
                class="relative overflow-hidden bg-white sm:rounded-lg dark:bg-white"
              >
                <div class="max-h-96 overflow-x-auto overflow-y-scroll">
                  <table
                    class="w-full text-left text-sm text-gray-500 dark:text-gray-400"
                  >
                    <thead
                      class="sticky top-0 bg-gray-50 text-xs uppercase text-gray-700 dark:bg-gray-100 dark:text-gray-400"
                    >
                      <tr>
                        <th class="px-4 py-3">Product Name</th>

                        <th class="px-4 py-3">Description</th>
                        <th class="px-4 py-3">Unit Price</th>
                        <th class="px-4 py-3">Quantity</th>
                        <th class="px-4 py-4">Taxable</th>
                        <th class="px-4 py-3">GST(%)</th>

                        <th class="px-4 py-3">GST Rate</th>
                        <th class="px-4 py-3">Item Total</th>
                        <th class="px-4 py-3">
                          <span class="sr-only">Actions</span>
                        </th>
                      </tr>
                    </thead>
                    <tbody *ngIf="visiable">
                      <tr
                        class="group/tr border-b border-gray-500 transition-all duration-500 hover:bg-gray-50 dark:border-gray-400"
                        *ngFor="let rItem of productList; let i = index"
                      >
                        <th class="px-4 py-3 group-hover/tr:text-black">
                          {{ rItem.prdCategory }}<br />
                          {{ rItem.prdModel }}
                        </th>

                        <td
                          class="text-wrap px-4 py-3 group-hover/tr:text-black"
                        >
                          {{ rItem.prdDescription }}
                        </td>
                        <td class="px-4 py-3 group-hover/tr:text-black">
                          {{ rItem.basePrice | number: "1.2-2" }}
                        </td>
                        <td class="px-4 py-3 group-hover/tr:text-black">
                          {{ rItem.quantity }}
                        </td>
                        <td class="px-4 py-3 group-hover/tr:text-black">
                          {{
                            rItem.basePrice * rItem.quantity | number: "1.2-2"
                          }}
                        </td>

                        <td class="px-5 py-3 group-hover/tr:text-black">
                          {{ rItem.prdGstPercent }}%<br />
                          <!-- <p *ngIf="rItem.prdGstStatus === 1">with GST</p> -->
                          <!-- <p *ngIf="rItem.prdGstStatus === 2">without GST</p> -->
                          <small class="inline-flex text-right text-gray-500"
                            ><h1>CGST:</h1>
                            <span>
                              {{ rItem.cgstAmt | currency: "INR" }}
                            </span> </small
                          ><br />
                          <small class="inline-flex text-right text-gray-500"
                            ><h1>SGST:</h1>
                            <span>
                              {{ rItem.sgstAmt | currency: "INR" }}
                            </span></small
                          ><br />

                          <small class="inline-flex text-right text-gray-500"
                            ><h1>IGST:</h1>
                            <span>
                              {{ rItem.igstAmt | currency: "INR" }}
                            </span></small
                          ><br />
                        </td>
                        <td class="px-4 py-3 group-hover/tr:text-black">
                          {{
                            (rItem.basePrice *
                              rItem.quantity *
                              rItem.prdGstPercent) /
                              100 | number: "1.2-2"
                          }}
                        </td>
                        <td class="px-4 py-3 group-hover/tr:text-black">
                          {{ rItem.includedtaxAmt }}
                        </td>
                        <td
                          class="flex items-center justify-end px-4 py-3 text-center group-hover/tr:font-bold group-hover/tr:text-gray-500"
                        >
                          <button
                            id="apple-imac-27-dropdown-button"
                            data-dropdown-toggle="apple-imac-27-dropdown"
                            class="mt-9 inline-flex items-center rounded-lg text-center text-sm font-medium text-gray-500 hover:text-gray-800 focus:outline-none dark:text-gray-400 dark:hover:text-gray-100"
                            type="button"
                          >
                            <div
                              class="group/delete rounded-lg bg-red-100 p-1 transition-all duration-500 hover:bg-red-600 active:translate-y-1"
                            >
                              <svg
                                class="h-4 w-4 text-red-600 group-hover/delete:text-red-100"
                                aria-hidden="true"
                                xmlns="http://www.w3.org/2000/svg"
                                width="24"
                                height="24"
                                fill="none"
                                viewBox="0 0 24 24"
                              >
                                <path
                                  stroke="currentColor"
                                  stroke-linecap="round"
                                  stroke-linejoin="round"
                                  stroke-width="2"
                                  d="M5 7h14m-9 3v8m4-8v8M10 3h4a1 1 0 0 1 1 1v3H9V4a1 1 0 0 1 1-1ZM6 7h12v13a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V7Z"
                                />
                              </svg>
                            </div>
                          </button>
                        </td>
                      </tr>
                    </tbody>
                  </table>

                  <div
                    class="col-span-full flex h-80 items-center justify-center"
                    *ngIf="emptyVisiable"
                  >
                    <tr>
                      <td class="col-span-12">
                        <svg
                          xmlns="http://www.w3.org/2000/svg"
                          fill="none"
                          viewBox="0 0 24 24"
                          stroke-width="1"
                          stroke="currentColor"
                          class="w-24 text-gray-200"
                        >
                          <path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            d="M2.25 13.5h3.86a2.25 2.25 0 0 1 2.012 1.244l.256.512a2.25 2.25 0 0 0 2.013 1.244h3.218a2.25 2.25 0 0 0 2.013-1.244l.256-.512a2.25 2.25 0 0 1 2.013-1.244h3.859m-19.5.338V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18v-4.162c0-.224-.034-.447-.1-.661L19.24 5.338a2.25 2.25 0 0 0-2.15-1.588H6.911a2.25 2.25 0 0 0-2.15 1.588L2.35 13.177a2.25 2.25 0 0 0-.1.661Z"
                          />
                        </svg>
                        <small>
                          <button
                            type="button"
                            routerLink="/home/cproduct"
                            class="-ml-5 mt-2 inline-flex items-center rounded-lg bg-blue-700 px-3 py-1.5 text-sm font-medium text-white hover:bg-blue-800 focus:outline-none focus:ring-4 focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700"
                          >
                            <svg
                              xmlns="http://www.w3.org/2000/svg"
                              fill="none"
                              viewBox="0 0 24 24"
                              stroke-width="1.5"
                              stroke="currentColor"
                              class="size-4"
                            >
                              <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                d="M12 4.5v15m7.5-7.5h-15"
                              />
                            </svg>
                            Add New Product
                          </button>
                        </small>
                      </td>
                    </tr>
                  </div>
                </div>
              </div>
            </div>
          </section>
        </div>
        <hr />
      </div>
      <div class="mt-4 flex justify-end">
        <button
          (click)="this.isCharge = !this.isCharge"
          type="button"
          class="mb-2 me-2 rounded-lg border border-gray-200 bg-white px-5 py-2.5 text-sm font-medium text-gray-900 hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:outline-none focus:ring-4 focus:ring-gray-100 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white dark:focus:ring-gray-700"
        >
          Additional Charges
        </button>
      </div>
      <section *ngIf="isCharge" class="mt-4">
        <div class="m-4 rounded-lg bg-gray-100">
          <div class="flex items-center justify-between p-6">
            <span class="font-semibold">Delivery Charges</span>
            <div class="flex items-center space-x-4">
              <input
                type="text"
                placeholder="DeliveryCharge"
                #deliveryCharge
                class="block w-32 rounded-lg border border-gray-300 bg-gray-50 px-2 py-1 text-base text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500"
              />
              <button
                (click)="saveTerms(deliveryCharge)"
                class="rounded-full bg-blue-500 px-3 py-1 font-semibold text-white hover:bg-blue-700"
              >
                ADD
              </button>
            </div>
          </div>
        </div>
        <div class="m-4 rounded-lg bg-gray-100">
          <div class="flex items-center justify-between p-6">
            <span class="font-semibold">Installation Charges</span>
            <div class="flex items-center space-x-4">
              <input
                type="text"
                placeholder="InstallationCharge"
                #installCharge
                class="block w-32 rounded-lg border border-gray-300 bg-gray-50 px-2 py-1 text-base text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500"
              />
              <button
                (click)="saveTerms1(installCharge)"
                class="rounded-full bg-blue-500 px-3 py-1 font-semibold text-white hover:bg-blue-700"
              >
                ADD
              </button>
            </div>
          </div>
        </div>
      </section>
    </div>
    <div class="grid grid-cols-2">
      <!-- First column -->
      <div>
        <div class="m-2 rounded-md bg-white p-2">
          <!-- <button
            type="button"
            class="mb-2 me-2 mr-9 mt-1 flex w-full items-center rounded-lg border border-blue-400 bg-blue-100 px-4 py-2.5 text-left text-sm font-medium text-gray-900 hover:bg-blue-400 focus:z-10 focus:ring-4 focus:ring-gray-100 dark:border-gray-300 dark:bg-blue-200 dark:text-blue-800"
            (click)="toggleTextarea()"
          >
            Notes

            <svg
              class="size-4"
              aria-hidden="true"
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              fill="none"
              viewBox="0 0 24 24"
            >
              <path
                stroke="currentColor"
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="m9 5 7 7-7 7"
              />
            </svg>
          </button> -->
          <div *ngIf="showDeliveryCharge">
            <input
              #deliveryCharge
              type="numbers"
              class="mt-2 w-full rounded border border-gray-300 p-2"
              placeholder="Add Delivery Charges here..."
            />
            <button
              class="ml-3 mt-1 rounded bg-blue-700 px-2 font-serif text-white"
            >
              Save
            </button>
            <button
              (click)="clearTerms()"
              class="ml-3 mt-1 rounded bg-red-500 px-2 font-serif text-white"
            >
              Clear
            </button>
          </div>
          <button
            type="button"
            class="mb-2 me-2 mr-9 mt-1 inline-flex w-full items-center rounded-lg border border-blue-400 bg-blue-100 px-4 py-2.5 text-left text-sm font-medium text-gray-900 hover:bg-blue-400 focus:z-10 focus:ring-4 focus:ring-gray-100 dark:border-gray-300 dark:bg-blue-200 dark:text-blue-800"
            (click)="toggleTextarea1()"
          >
            Terms & Conditions
            <svg
              class="size-4"
              aria-hidden="true"
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              fill="none"
              viewBox="0 0 24 24"
            >
              <path
                stroke="currentColor"
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="m9 5 7 7-7 7"
              />
            </svg>
          </button>

          <div *ngIf="showInstallationCharge">
            <textarea
              rows="4"
              cols="50"
              #teamConditn
              [(ngModel)]="termsText"
              (keydown)="handleEnter($event, teamConditn)"
              class="mt-2 w-full rounded border border-gray-300 p-2"
              placeholder="Add Installation charges here..."
            ></textarea>
            <button
              (click)="termsConditions()"
              class="ml-3 mt-1 rounded bg-blue-700 px-2 font-serif text-white"
            >
              Save
            </button>
            <button
              (click)="clearTerms()"
              class="ml-3 mt-1 rounded bg-red-500 px-2 font-serif text-white"
            >
              Clear
            </button>
          </div>
        </div>
      </div>
      <div>
        <div
          class="ml-3 mr-2 mt-2 rounded-lg border border-green-300 bg-green-200 p-4"
        >
          <div class="">
            <div class="flex justify-between">
              <small><h1>Taxable Amount:</h1></small>

              <small
                >{{ _taxable | currency: "INR"
                }}<span
                  class="inline-flex items-center text-right text-gray-500"
                >
                </span
              ></small>
            </div>

            <div class="flex justify-between">
              <small><h1>IGST Amount:</h1></small>

              <small
                >{{ _igstAmt | currency: "INR"
                }}<span
                  class="inline-flex items-center text-right text-gray-500"
                >
                </span
              ></small>
            </div>
            <div class="flex justify-between">
              <small><h1>CGST Amount:</h1></small>

              <small
                ><span
                  class="inline-flex items-center text-right text-gray-500"
                >
                  {{ _cgstAmt | currency: "INR" }}
                </span></small
              >
            </div>
            <div class="flex justify-between">
              <small><h1>SGST Amount:</h1></small>

              <small
                ><span
                  class="inline-flex items-center text-right text-gray-500"
                >
                  {{ _sgstAmt | currency: "INR" }}
                </span></small
              >
            </div>

            <div *ngIf="isDelivery" class="flex justify-between">
              <small><h1>Delivery Charges:</h1></small>

              <small
                ><span
                  class="inline-flex items-center text-right text-gray-500"
                >
                  <span class="font-semibold">GST (18%): </span>
                  <span>{{
                    deliveryChargeGst + deliveryCharge | currency: "INR"
                  }}</span>
                </span>
              </small>
            </div>
            <div *ngIf="isInstall" class="flex justify-between">
              <small><h1>Installation Charges:</h1></small>

              <small
                ><span
                  class="inline-flex items-center text-right text-gray-500"
                >
                  <span class="font-semibold">GST (18%): </span>
                  <span>{{
                    installationChargeGst + installationCharge | currency: "INR"
                  }}</span>
                </span>
              </small>
            </div>
            <div class="flex justify-between">
              <small><h1>Total Amount:</h1></small>
              <small>
                <span class="inline-flex items-center text-right text-black">
                  {{ _totalAmt.toFixed(2) | currency: "INR" }}</span
                >
              </small>
            </div>
          </div>
        </div>
        <div class="ml-4 mt-2">
          <small class="text-gray-500">Add Bank Details</small>
          <div class="mr-2 rounded-md bg-gray-200 p-4">
            <div class="-mt-2 inline-flex items-center">
              <label
                for="countries"
                class="block text-sm font-medium text-gray-900 dark:text-gray-600"
                ><small class="inline-flex items-center"
                  >Select an bank
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 24 24"
                    fill="currentColor"
                    class="ml-1 size-4"
                  >
                    <path
                      fill-rule="evenodd"
                      d="M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm11.378-3.917c-.89-.777-2.366-.777-3.255 0a.75.75 0 0 1-.988-1.129c1.454-1.272 3.776-1.272 5.23 0 1.513 1.324 1.513 3.518 0 4.842a3.75 3.75 0 0 1-.837.552c-.676.328-1.028.774-1.028 1.152v.75a.75.75 0 0 1-1.5 0v-.75c0-1.279 1.06-2.107 1.875-2.502.182-.088.351-.199.503-.331.83-.727.83-1.857 0-2.584ZM12 18a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z"
                      clip-rule="evenodd"
                    />
                  </svg> </small
              ></label>
              <button
                routerLink="/home/settings/bankDetail"
                class="inline-flex items-center text-xs font-normal text-gray-600 hover:underline dark:text-gray-600"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 24 24"
                  fill="currentColor"
                  class="ml-3 size-3 text-gray-500"
                >
                  <path
                    fill-rule="evenodd"
                    d="M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25ZM12.75 9a.75.75 0 0 0-1.5 0v2.25H9a.75.75 0 0 0 0 1.5h2.25V15a.75.75 0 0 0 1.5 0v-2.25H15a.75.75 0 0 0 0-1.5h-2.25V9Z"
                    clip-rule="evenodd"
                  />
                </svg>
                <small> Add New Bank</small>
              </button>
            </div>
            <select
              #bankId
              (change)="quoBank(bankId.value)"
              class="mt-2 block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-300 dark:text-gray-700 dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500"
            >
              <option value="null" disabled selected>Select Bank Name</option>
              <option *ngFor="let bank of _bankName" value="{{ bank.bankId }}">
                {{ bank.bankName }}
              </option>
            </select>
          </div>
        </div>
      </div>
    </div>
    <div
      class="ml-6 mr-7 mt-4 flex w-auto justify-end rounded-md border bg-white p-3"
    >
      <button
        type="button"
        class="s mb-2 me-2 rounded-lg border border-gray-200 bg-white px-5 py-2.5 text-sm font-medium text-gray-900 hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:outline-none focus:ring-4 focus:ring-gray-100 dark:border-gray-300 dark:bg-white dark:text-gray-800 dark:hover:text-gray-700 dark:focus:ring-gray-700"
      >
        Save and draft
      </button>
      <button
        type="button"
        class="s mb-2 me-2 rounded-lg border border-gray-200 bg-white px-5 py-2.5 text-sm font-medium text-gray-900 hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:outline-none focus:ring-4 focus:ring-gray-100 dark:border-gray-300 dark:bg-white dark:text-gray-800 dark:hover:text-gray-700 dark:focus:ring-gray-700"
      >
        Save and Print
      </button>

      <button
        (click)="submitQuotation()"
        type="button"
        class="focus:ring-blue shadow-md-300 mb-2 me-2 rounded-lg bg-blue-700 px-6 py-2 text-sm font-medium text-white hover:bg-blue-800 focus:outline-none focus:ring-4 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"
      >
        save
      </button>
    </div>
  </section>
</section>
<section *ngIf="successPopup" class="mr-67 fixed mx-auto">
  <div class="mx-auto">
    <app-success-popup [successMessage]="successMessage"></app-success-popup>
  </div>
</section>
